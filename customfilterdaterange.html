
<h2>Custom filters - date range</h2>
<hr class="titleseparator"/>
<div class="example">
	<table id='demotable-customfilterdaterange' class="demotable">
		<thead>
		<tr><th>Text Column 1</th><th>Number Column</th><th>Yes/No</th><th>Date column</th><th>Empty</th></tr>
		</thead>
		<tbody>
			<tr><td>Value257</td><td>214</td><td>yes</td><td>12/01/[year]</td><td></td></tr>
			<tr><td>Value417</td><td>473</td><td>yes</td><td>24/02/[year]</td><td></td></tr>
			<tr><td>Value91</td><td>406</td><td>yes</td><td>13/04/[year]</td><td></td></tr>
			<tr><td>Value174</td><td>31</td><td>no</td><td>15/07/[year]</td><td></td></tr>
			<tr><td>Value122</td><td>98</td><td>no</td><td>13/08/[year]</td><td></td></tr>
			<tr><td>Value251</td><td>362</td><td>yes</td><td>16/09/[year]</td><td></td></tr>
			<tr><td>Value142</td><td>124</td><td>no</td><td>15/10/[year]</td><td></td></tr>
			<tr><td>Value196</td><td>30</td><td>no</td><td>21/11/[year]</td><td></td></tr>
			<tr><td>Value421</td><td>410</td><td>yes</td><td>18/12/[year]</td><td></td></tr>
			<tr><td>Value42</td><td>209</td><td>yes</td><td>20/03/[year]</td><td></td></tr>
		</tbody>
	</table>
</div>
<div class="exampledescription">
	<h3>Description</h3>
	<p>This example shows how you can add two JQueryUI datepicker control to specify a date range to filter on. Other custom filter controls can be added in the same way.</p>
	<h4>Explanation of the options</h4>	
	<p><b>control:</b> The jquery control(s) to use as custom filter control(s)<br/><b>setupTrigger:</b> A function used to set up the filter control to call the function that triggers the filtering (the function that should be called is passed as argument)<br/><b>getValue:</b> A function that returns the value of the custom filter control<br/><b>setValue:</b> A function that sets the value in the custom filter control (for example after a reloding the page)</br><b>matchFunction:</b> A function that compares the internal row object (trf) to the filter value to determine if they are a match</p>
</div>

<div class="clearfix"></div>
<h3>Code</h3>

<div id="codetabs">
  <ul>
    <li><a href="#tabs-1">JavaScript</a></li>
    <li><a href="#tabs-2">HTML</a></li>
    <li><a href="#tabs-3">CSS</a></li>
  </ul>
  <div id="tabs-1">
    <script type="syntaxhighlighter" class="brush: js; toolbar: false;"><![CDATA[
           $(document).ready(function () {
             var tooltip = 'Your tooltip here!';
             var datepickerInputFields = $('<table class="filterLayout" width="170"><tr><td>From:</td><td><input type="text" maxlength="10" size="4" id="datepickerfrom"/></td></tr><tr><td>To:</td><td><input type="text" maxlength="10" size="4" id="datepickerto"/></td></tr><table>');
            
             var optionsCustomFilter = {
            	columnFilters: [ 	
                  { columnName: 'col1', inputType: 'text', toolTipMessage: tooltip },
                  { columnName: 'col2', inputType: 'text', toolTipMessage: tooltip },
                  { columnName: 'col3', inputType: 'text' },
                  { columnName: 'colDate', inputType: 'custom', 
                       control: datepickerInputFields,
            	       matchFunction: function(ctrl, trf, textFilterValue, normalisedTokens) 
                       {
                            var filterDates = textFilterValue.split(';');
                            var fromDateParts = filterDates[0].split('/');
                            var toDateParts = filterDates[1].split('/');
                            var columnDateParts = trf.colDate.split('/');
                            var fromDate = new Date(fromDateParts[2], fromDateParts[1], fromDateParts[0], 0, 0, 0, 0);
                            var toDate = new Date(toDateParts[2], toDateParts[1], toDateParts[0], 0, 0, 0, 0);
                            var columnDateValue = new Date(columnDateParts[2], columnDateParts[1], columnDateParts[0], 0, 0, 0, 0);
                            return (isNaN(fromDate.getTime()) || fromDate <= columnDateValue) 
                               && (columnDateValue <= toDate || isNaN(toDate.getTime()));
                       },
                       setupTrigger: function(func)
                       {
                         $('#datepickerfrom').change(func);
                         $('#datepickerto').change(func);
                       },
                       getValue: function()
                       {
                         return $('#datepickerfrom')[0].value + ";" + $('#datepickerto')[0].value;
                       },
                       setValue: function(value)
                       {
                         if (value == null)
                         {
                           value = ";"
                         }
                         var split = value.split(';');
                         $('#datepickerfrom')[0].value = split[0];
                         $('#datepickerto')[0].value = split[1];
                       }
                  },
                  { columnName: 'col7', inputType: 'empty'}       	
                ]
            };

            $('#demotable-customfilterdaterange').tableFilter(optionsCustomFilter);
            $('#datepickerfrom').datepicker({ dateFormat: 'dd/mm/yy', buttonImage: 'datepicker/images/calendar.gif', buttonImageOnly: true, showOn: 'both' });
            $('#datepickerto').datepicker({ dateFormat: 'dd/mm/yy', buttonImage: 'datepicker/images/calendar.gif', buttonImageOnly: true, showOn: 'both' });
          });
    ]]>
    </script>
  </div>
  <div id="tabs-2">
     <script type="syntaxhighlighter" class="brush: xml; toolbar: false;"><![CDATA[
	<table id='demotable-customfilterdaterange' class="demotable">
		<thead>
		<tr><th>Text Column 1</th><th>Number Column</th><th>Yes/No</th><th>Date column</th><th>Empty</th></tr>
		</thead>
		<tbody>
			<tr><td>Value257</td><td>214</td><td>yes</td><td>12/01/[year]</td><td></td></tr>
			<tr><td>Value417</td><td>473</td><td>yes</td><td>24/02/[year]</td><td></td></tr>
			<tr><td>Value91</td><td>406</td><td>yes</td><td>13/04/[year]</td><td></td></tr>
			<tr><td>Value174</td><td>31</td><td>no</td><td>15/07/[year]</td><td></td></tr>
			<tr><td>Value122</td><td>98</td><td>no</td><td>13/08/[year]</td><td></td></tr>
			<tr><td>Value251</td><td>362</td><td>yes</td><td>16/09/[year]</td><td></td></tr>
			<tr><td>Value142</td><td>124</td><td>no</td><td>15/10/[year]</td><td></td></tr>
			<tr><td>Value196</td><td>30</td><td>no</td><td>21/11/[year]</td><td></td></tr>
			<tr><td>Value421</td><td>410</td><td>yes</td><td>18/12/[year]</td><td></td></tr>
			<tr><td>Value42</td><td>209</td><td>yes</td><td>20/03/[year]</td><td></td></tr>
		</tbody>
	</table>
	]]>
     </script>
  </div>
  <div id="tabs-3">
    <script type="syntaxhighlighter" class="brush: css; toolbar: false;"><![CDATA[
       .demotable th {
          background-color: #333;
          color: #fff;
          font-size: 0.85em;
       }
       .demotable {
          border-width: 1px;
          border-style: solid;
       }
    ]]>
    </script>
  </div>

</div>
